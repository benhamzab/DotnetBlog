@model BLOGAURA.Models.Posts.ProfileViewModel
@{
    ViewData["Title"] = "Mon profil";
    var userName = Model.User.Username;
    var email = Model.User.Email;
    var initial = string.IsNullOrWhiteSpace(userName) ? "U" : userName.Trim()[0].ToString().ToUpperInvariant();
}

<div class="home-dashboard">
    <aside class="home-sidebar">
        <div class="home-profile-card">
            <div class="home-profile-header">
                <div class="home-profile-banner"></div>
                <div class="home-profile-avatar-wrapper">
                    <div class="home-profile-avatar-circle">@initial</div>
                </div>
            </div>
            <div class="home-profile-body">
                <h3 class="home-profile-name">@userName</h3>
                <p class="home-profile-role">Membre BlogAura</p>
                <p class="home-profile-email">@email</p>
            </div>
            <div class="home-profile-stats">
                <div class="home-profile-stat">
                    <div class="home-profile-stat-label">Posts</div>
                    <div class="home-profile-stat-value">0</div>
                </div>
                <div class="home-profile-stat">
                    <div class="home-profile-stat-label">Abonnements</div>
                    <div class="home-profile-stat-value">0</div>
                </div>
                <div class="home-profile-stat">
                    <div class="home-profile-stat-label">Abonnés</div>
                    <div class="home-profile-stat-value">0</div>
                </div>
            </div>
            <div class="home-profile-footer">
                <a asp-controller="Home" asp-action="Index" class="home-btn home-btn-outline home-profile-btn">Retour au fil</a>
            </div>
        </div>
    </aside>

    <section class="home-main">
        @if (TempData["PostSuccess"] != null)
        {
            <div class="alert alert-success mb-3">@TempData["PostSuccess"]</div>
        }

        <div class="home-feed-header">
            <h2>Mes posts</h2>
            <a asp-controller="Posts" asp-action="CreatePost" class="home-btn home-btn-primary">Créer un post</a>
        </div>

        <div class="home-feed-grid">
            @if (Model.Posts != null && Model.Posts.Any())
            {
                foreach (var post in Model.Posts)
                {
                    @await Html.PartialAsync("~/Views/Posts/_PostCard.cshtml", post)
                }
            }
            else
            {
                <p class="text-muted">Vous n'avez pas encore publié de post.</p>
            }
        </div>
    </section>
</div>
